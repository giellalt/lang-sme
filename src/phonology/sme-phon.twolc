! Divvun & Giellatekno - open source grammars for SÃ¡mi and other languages
! Copyright Â© 2000-2010 The University of TromsÃ¸ & the Norwegian SÃ¡mi Parliament
! http://giellatekno.uit.no & http://divvun.no
!
! This program is free software; you can redistribute and/or modify
! this file under the terms of the GNU General Public License as published by
! the Free Software Foundation, either version 3 of the License, or
! (at your option) any later version. The GNU General Public License
! is found at http://www.gnu.org/licenses/gpl.html. It is
! also available in the file $GTHOME/LICENSE.txt.
!
! Other licensing options are available upon request, please contact
! giellatekno@hum.uit.no or feedback@divvun.no

! ========================================================================== !
!!                   !!! North SÃ¡mi morphophonological rule set                  
! ========================================================================== !

! twol-sme.txt
!! The file contains the rule set for the non-segmental
!! North SÃ¡mi morphophonological rules

!! Note that when copied over to newinfra, this file will be labeled sme-phon-L1.twolc.
!! The file sme-phon-L1.twolc will __not__ be the source file to edit, 
!! rather, the source file will be this file, gt/sme/src/twol-sme.txt. This file (in the old infra)
!! is the ordinary sme fst file to be edited.
!! The L2 sme fst, on the other hand, will have lags/sme/src/phonology/sme-phon-L2.twolc
!! as its sourcefile, the file to be edited.

Alphabet
 a b c d e f g h i j k l m n o p q   ! small
 r s t u v w x y z Ã¥ Ã¤ Ã¶ Ã¸ Ã¦ %-
 Ã¡ Ã© Ã³ Ãº Ã­ Ã  Ã¨ Ã² Ã¹ Ã¬ Ã« Ã¼ Ã¯ Ã¢ Ãª Ã´ Ã» Ã® Ã£ Ã½ Ã¾ Ã± Ã° ÃŸ Âª ÃŸ Ã§

 A B C D E F G H I J K L M N O P Q   ! capital
 R S T U V W X Y Z Ã… Ã„ Ã– Ã˜ Ã†
 Ã Ã‰ Ã“ Ãš Ã Ã€ Ãˆ Ã’ Ã™ ÃŒ Ã‹ Ãœ Ã Ã‚ ÃŠ Ã” Ã› Ã Ãƒ Ã Ã¾ Ã‘ Ã

! Morphophonemes


u6:u

e7:e h7:h i7:i o7:o u7:u Ã¦7:Ã¦ 

g8:g h8:h m8:m n8:n 

  ! the x8 ones are consonants that alternate in stem-final positions.

b9:b d9:d e9:e g9:g h9:h j9:j k9:k m9:m n9:n o9:o p9:p r9:r s9:s t9:t z9:z Ã¦9:Ã¦ Å¡9:Å¡ Å¾9:Å¾ 

! The x9 consonants  never alternate.

! Literal quotes and angles must be escaped (cf morpheme boundaries further down):
 Â»7     ! Â»
 Â«7     ! Â«
 %[%>%] ! >
 %[%<%] ! <

 Ä Ä‘ Å‹ Å¡ Å§ Å¾          ! SÃ¡mi letters.
 ÄŒ Ä ÅŠ Å  Å¦ Å½          !

 ':0 %/ Â¤:0 '7:'
			    ! ' is for CnsGrad of the lg:lgg and l'l:ll type
                            ! Â¤:0 prevents ConsGrad in certain words
                            ! '7 is the real apostroph


 X1:0 X2:0 X3:0 X4:0 X5:0 X6:0 X7:0 X8:0 X9:0   ! diacritics
 Q1:0 Q2:0 Q3:0 Q4:0 Q5:0 Q6:0 Q7:0 Q8:0 Q9:0   ! They trigger morphophono-
 Y1:0 Y2:0 Y3:0 Y4:0 Y5:0 Y6:0 Y7:0 Y8:0 Y9:0   ! logical rules
 W1:0 W2:0 W3:0 W4:0 W5:0 W6:0 W7:0 W8:0 W9:0
 

 %^DISIMP:0

! Morpheme boundaries:
 Â«  ! Derivational prefix
 Â»  ! Derivational suffix
 %< ! Inflectional prefx
 %> ! Inflectional suffix
 #  ! Word boundary for both lexicalised and dynamic compounds
 %^ ! (exceptional) soft hyphenation point
 ğŸ˜± ! Used in front of # for dynamic compounds.

 ! Escaped chars
 %  

! End of alphabet definitions
;

Sets
  Vow = a Ã¡ e e7 e9 i i7 o o7 o9 u u6 u7 y Ã¦ Ã¦7 Ã¸ Ã¥ Ã¤ Ã¶
        A Ã E       I    O     U    Y Ã†    Ã˜ Ã… Ã„ Ã–
!        O9
        Ã© Ã³ Ãº Ã­ Ã  Ã¨ Ã² Ã¹ Ã¬ Ã« Ã¼ Ã¯ Ã¢ Ãª Ã´ Ã» Ã® Ã£ Ã½
        Ã‰ Ã“ Ãš Ã Ã€ Ãˆ Ã’ Ã™ ÃŒ Ã‹ Ãœ Ã Ã‚ ÃŠ Ã” Ã› Ã Ãƒ Ã ;
  Cns = b b9 c Ä d Ä‘ d9 f g g8 g9 h h8 h9 j j9 k k9 l m m8 m9 n Å‹ n8 n9
        B C ÄŒ D Ä F G H J K L M N ÅŠ
!        B9 D9 G8 G9 H8 H9 J9 K9 M8 M9 N8 N9 P9 Z9 
        p p9 r s Å¡ t Å§ v w z Å¾ z9 ' '7
        P R S Å  T Å¦ V W Z Å½ ;
  StemCns = b b9 d d9 g g8 g9 h h8 h9 j j9 l m m8 m9 n n8 n9 r s Å¡
            B D G H J L M N R S Å  
!            B9 D9 G8 G9 H8 H9 J9 M8 M9 N8 N9 
            ;
  WeG = X4 X5 X6 X8 X9 Q4 Q5 Q6 Q7 Q8 W1 W4 W5 W7 %^DISIMP ;
  Len = Y1 Y2 Y3 Y4 Y5 Y6 Y7 Y9 Â¤ ;
  Dummy = X1 X2 X3 X4 X5 X6 X7 X8 X9 Q1 Q2 Q3 Q4 Q5 Q6 Q7 Q8 Q9 %^DISIMP
          Y1 Y2 Y3 Y4 Y5 Y6 Y7 Y8 W1 W2 W3 W4 W5 W6 W7 W8 W9 Â¤ %> %^ Â» ;
  FinalDummy = X2 X4 X7 X8 %> %^ Â» ;         ! This set is not in use !!
  NonMPDummy = X1 X4 X7 X8 Â¤ %> %^ Â» ;
  NonMPDummy2 = X1 X4 Â¤ %> %^ Â» ;
  HighVow = i i7 u u7 I U ;
  NonHighVow = a e e7 e9 o7 o9 o A E O ;
  Stop = k p t c Ä K P T C ÄŒ ;
  DelCns = g8 m8 n8 h8 
!  G8 M8 N8 H8 
	;
  CntrCns = s j h Å¾ S J H Å½ ;
  Hyph = %- ;


Definitions

! G3  = Vow Cns Cns Cns Vow ;
! G2  = Vow Cns Cns Vow ;
! G1  = Vow Cns Vow ;
! G12 = G1 | G2 ;

! The G1 gang

! The G2 gang

! The G3 gang
! Ä‘'Ä‘ f'f l'l hl'l m'm n'n n'nj Å‹'Å‹ r'r hr'r s's Å¡'Å¡ Å§'Å§ v'v
! bm dn dnj gÅ‹
! hcc hÄÄ hpp hkk htt ddj
! llj
! bb dd gg zz Å¾Å¾
! r'bm r'dn r'dnj 'rgÅ‹
!Ä‘'b, Ä‘'b, Ä‘'j, Ä‘'v, i'b, i'c, i'd, i'f, i'g, i'k, i'l, i'hl, i'hm, i'hn, i'p, i'r, i's, i't, i'v, i'z,
!l'b, l'c, l'Ä, l'd, l'f, l'g, l'j, l'k, l'p, l's, l'Å¡, l't, l'v, l'Å¾, m'b, m'p, m's, m'Å¡, n'c, n'Ä, n'd,
!n's, n't, n'z, n'Å¾, Å‹'g, Å‹'k, r'b, r'c, r'Ä, r'd, r'f, r'g, r'j, r'k, r'p, r's, r'Å¡, r't, r'v, r'z, r'Å¾,
!s'k, s'm, s'p, s't, Å¡'k, Å¡'m, Å¡'t, Å¡'v, t'k, t'm, v'd, v'g, v'j, v'k, v'l, v'hl, v'p, v'r, v't, v'z, v'Å¾
!Ä‘'bm d'gÅ‹ i'bm i'dn i'gÅ‹ l'bm l'dn l'gÅ‹ v'dn v'dnj
!i'sk i'st m'Å¡k n'sk n'st r'sk r'st v'sk
!k'c k'Ä k's k'st k'Å¡ k't

! G3 = Cns: Cns: Cns (Cns) | b m | d n | g Å‹ | b b | d d | g g | z z | Å¾ Å¾ |

! Intuition:
! Have the => rule work in case of (upper or lower or both?) G3.
! Have the <=> rule work in al

! Define G12: Here we have <=>
! Define G3 (or not): Here (i.e. elsewhere) we have =>.

!Defining G1, G2, G3.
!Auxiliary definitions
G1  = Cns | h [l|r] | n j ;

!UCns = Cns: ;
!RLCns = :Cns;
!RealCns = UCns:LCns - ':0 ;
RealCns    = Cns - ':0 ;
all2Cns    = Cns Cns ;
real2CnsG3 =  b: m | d: n | g: Å‹ | b: b: | d: d: | g: g: | z: z: | Å¾: Å¾: ; ! This could be the problem
2CnsG2     = all2Cns - real2CnsG3 ;
3CnsG2     = Cns RealCns Cns ; !!!!!!!!!!!!!!                        ! Ä‘'b:Ä‘bb, Ä‘'g:Ä‘gg, ...
fake8CnsG3 = Cns: ': Cns ;                                          ! Ä‘'b:Ä‘0b
3CnsG3     = h [ c c | Ä Ä | p p | k k | t t ] | [ d d | l l ] j  ;

!G2  = 2CnsG2 | 3CnsG2 ;
! 2CnsG2 is well-defined, 3CnsG2 is not. :-(

!G3  = fake8CnsG3 | real2CnsG3 | 3CnsG3 ;
!G3  = fake8CnsG3 ; !err
!G3  = real2CnsG3 ; !err
!G3  = 3CnsG3 ;     !err
! => All 3 parts of the G3 definition are flawed

!G12 = G1 | G2 ;                        ! This is what we waht
G12 = G1 | 2CnsG2 ; ! testing G2 parts  ! This we do while waiting for 3CnsG2.
! The second part of the G2 definitions is flawed.

! Pseudocode (see "Going for 2" below)
! Diphthongsimpl <=> _ G12 i j: ;
! OptDiphtsimpli  => _ G3  i j: ;








! ============ !
! Rule section !
! ============ !



Rules

! Introduction to the set of testwords (introduced with !!â‚¬ and !!$ that are added)
! -------------------------------------------------------------------------------

! (this documentation will be enlarged and moved to the documentation, and a trimmed version
! will be left here)

! For each rule, there is a set of word pairs to test. The words will be extracted into
! two files (the !!â‚¬ words for positive tests, the !!$ ones for negative tests, i.e. pairs that
! the parser shall reject.

! Basic usage is: (this paragraph shall be removed, as we want the one in the next paragraph)
! open twolc -utf8. Issue the following commands:
! install-binary bin/twol-sme.bin
! pair-test-file filename (where "filename" is the name of the file containing the test words)

! Usage (this is what we are aiming at):
! In the testing catalogue, issue one of the commands
! make twol-positive
! make twol-negative
! make twol-test (do both)
! This will extract the test pairs from this file, and print a report for each of the tests.
! The reports will be printed to report files named twol-pos.out and twol-neg.out. The reports
! are finally scanned by another script, which gives a warning if anything unexpected was found.

! We may also use other testfiles than the ones generated from this file (twol-sme.txt file).
! make twol-test TYPE=pos FILE=testfile   (when the file contains positive test pairs)
! make twol-test TYPE=neg FILE=testfile   (when the file contains negative test pairs)
! make twol-test FILE=testfile            (the default is TYPE=pos)
! make twol-test HELP                     (prints out these lines)

! The test cases are of two types:
! - positive tests
! - negative tests
!
! Positive tests are such that they require the pairs to match - if not, the rule (or
! another conflicting rule) is broken. These test pairs should be designed to check that
! the rule allways give the wanted mapping.
!
! Positive tests are marked with a â‚¬ sign (and as a comment, to not infer with the
! regular rule compilation):
!
!!â‚¬ Ã¡j'gi
!!â‚¬ Ã¡i0gi
!
! Negative tests are pairs that should NOT match. The pairs should be designed such that
! they are likely but illegal pairs, so as to identify possible holes in the rules. Such
! holes will lead to overgeneration, and spurious acceptance of misspelled words, wrong
! analyses, bad generation, etc. Also, errors in the rules can lead to an inefficient
! analyser.
!
! Negative tests are also very important for regression testing: all bugs found and
! corrected should be added as negative pairs illustrating the bug that was corrected.
! This way, we can always check whether the bugs are still fixed or reintroduced by
! other bug fixes.
!
! Negative tests are marked with a dollar sign:
!
!!$ mÃ¡nnÃ¡X5jd
!!$ mÃ¡0nÃ¡0jd
!
! You may have more than one test word (pair) on each line, that is, you can have several
! pairs after each other on two lines separated by one or more spaces. This will save
! precious vertical space in the file, and make the rule file easer to read.
!
! The result/output is:
! REJECT
! ACCEPT
! Error
! and will be put into a separate test result file. A final script checks that the test
! result is what it should be, and reports the findings (ok/error(s) found).



! ============================ !
! Here begins the rule section !
! ============================ !

! j rule
! ------

"Postvocalic j Surfacing"
! j:i <=>  ( %>: ) ( Â»: ( Â»: Â»: )) [Vow:|:0] ( %>: ) ( :0 ) ( %>: ) ( Â»: ( Â»: Â»: )) ( Dummy: ) _ [ Cns | ': | ( %>: ) ( Â»: ( Â»: Â»: )) ( :0 - Y5: - Y6:)+ (Hyph) ( ğŸ˜± ) # ] ; !Thomas #699
  j:i <=>  Vow: ( %>: ) ( :0 ) ( Dummy: )* _ [ Cns | ': | ( %>: ) ( Â»: ( Â»: Â»: )) ( :0 - Y5: - Y6:)+ [ Hyph | ( ğŸ˜± ) # ] ] ; ! Kept Vow:, but accepted Dummies at length

!!â‚¬ Ã¡j'gi
!!â‚¬ Ã¡i0gi

!!â‚¬ majdege
!!â‚¬ maidege

!!$ almmajX4in
!!$ almmai0in

!!â‚¬ mÃ¡nnÃ¡X5jd
!!â‚¬ mÃ¡0nÃ¡0id

!!â‚¬ almmÃ¡jX4#
!!â‚¬ almmÃ¡i0#

!!â‚¬ almmÃ¡jX4X7-
!!â‚¬ almmÃ¡i00-

!!â‚¬ almmÃ¡jX4in
!!â‚¬ almmÃ¡j0in

! Added ( :0 ) because of olmmoÅ¡ !  new version for Troandin-bisma
! All j:i alternation is conflated into one rule. LC is vowel and optional
! (suffixinitial) dummy symbol, RC is consonant, dummy or word boundary,
! The intention is to have the strict operator (<=>), but catch the
! variation with a lot of (=all) contextual alternatives.
! exchanging DummyNotY5 with :0 - Y5: , better luck this time.

! Word final consonant alternations
! ---------------------------------

! Only alveolar consonants word-finally:

"Word Final Consonant Neutralization 1"  !smirezit : smires, Troandin-bisma
  Cx:Cy <=> Vow: (( CntrCns:) ( %>: ) ( Â»: ( Â»: Â»: )) Dummy:+) _ (':0 k:0) ( %>: ) ( Â»: ( Â»: Â»: )) ( :0 - Y5: - Y6: )( :0 - Y5: - Y6: ) [ Hyph | ( Â»: ( Â»: Â»: )) ( ğŸ˜± ) # ]  ;
			where Cx in (z m h p g b d)
			      Cy in (s n t t t t t)
			matched ;


"Word Final Consonant Neutralization Å½"
 Å¾:Å¡ <=> Vow: _ (Å¾:0) [%>:|Â»: Â»: Â»: |%>: [(Â»:) X7:|X4:|Â»: X8:|X4: X7:|Â»: Â»: Â»:]] [ Hyph | ( ğŸ˜± ) # ] ;
 
"Word Final Consonant Neutralization Å½2"
 Å¾:Å¡ <=> Vow: [%>: Y5:|%>: Q7:|Â»:|%>] _ [ Hyph | ( ğŸ˜± ) # ] ;
 
"Word Final Consonant Neutralization Å½3"
 Å¾:Å¡ <=>  %>: Y5: Â»: X6: _ (X7:) [ Hyph | ( ğŸ˜± ) # ] ;

"Word Final Consonant Neutralization Å½4"
 Å¾:Å¡ <=> Vow: (Â¤:) (%>:) (Â»:) X6: _ (X7:) [ Hyph | ( ğŸ˜± ) # ] ;

"Word Final Consonant Neutralization Å½5"
 Å¾:Å¡ <=> Vow: _ (Å¾:0) [ Hyph | ( ğŸ˜± ) # ] ;

!%>X6Å¾
!Testcases for the above rules:
!!â‚¬ barggoÅ¾-
!!â‚¬ barggoÅ¡-

!!â‚¬ smirez-
!!â‚¬ smires-

!!â‚¬ Troandim#
!!â‚¬ Troandin#

!!â‚¬ Troandim-
!!â‚¬ Troandin-

!!â‚¬ muhtum#
!!â‚¬ muhtun#

!!â‚¬ skoalkkuh#
!!â‚¬ skoalkkut#

!!â‚¬ nagod#
!!â‚¬ nagot#

!!â‚¬ bÃ¡vÄÄag#
!!â‚¬ bÃ¡vÄÄat#

!!â‚¬ nuorab#
!!â‚¬ nuorat#

!!â‚¬ bÃ¡vÄÄag#
!!â‚¬ bÃ¡vÄÄat#

!!â‚¬ eamid#
!!â‚¬ eamit#

!!â‚¬ alih#
!!â‚¬ alit#

!!â‚¬ olmmoÅ¾>X4X7-
!!â‚¬ olmmoÅ¡>00-

! This test pair irrelevant, as line commented out.
! $ olmmoÅ¾X7-
! $ olmmoÅ¡0-

!!â‚¬ olmmoÅ¾>X4#
!!â‚¬ olmmoÅ¡>0#


"Word Final Consonant Neutralization 2"
Cx:Cy => # Cns:* (Vow:) Vow: Cns:+ Vow: j: _ ( %>: ) ( Â»: ( Â»: Â»: )) ( ğŸ˜± ) # ; !hÃ¡liid/hÃ¡liit
            where Cx in (d)
                  Cy in (t) ;


"Deletion: Final h s j Å¾ in Contracted Stems"
Cx:0 <=> Vow _ ( %>: ) ( Â»: ( Â»: Â»: )) [ Y5: | Y6: j: ] ; !1.138
!Cx:0 <=> Vow _ [ Y5: | Y6: j: ] ( [ Hyph | ( ğŸ˜± ) # ] ) ;
!Cx:0 <=> Vow _ [ Y5: | Y6: j: ]   [ Hyph | ( ğŸ˜± ) # | Cns: ];
			where Cx in (h s j Å¾) ;
! Debugging, 142 for reference.
! Changed because:-

!!â‚¬ fijdnisY5t
!!â‚¬ fiidnÃ¡00t

!!$ fijdnisY5t
!!$ fiidnÃ¡s0t

!!$ fijdnisY5t
!!$ fiidnis0t

!!â‚¬ albmÃ¡jY5
!!â‚¬ albmÃ¡00

!!â‚¬ olbmoÅ¾Y5
!!â‚¬ olbmo00

!!â‚¬ fijdnisY5t-
!!â‚¬ fiidnÃ¡00t-

!!â‚¬ albmÃ¡jY5-
!!â‚¬ albmÃ¡00-

!!â‚¬ olbmoÅ¾Y5-
!!â‚¬ olbmo00-



"Word Final Cluster Simplification 1"
  Cy:0 <=> Vow Cx _ ( %>: ) ( Â»: ( Â»: Â»: )) [  Hyph  | ( ğŸ˜± ) # ] ;
	where Cx in (l r)
	      Cy in (d g) ;
!!â‚¬ vuordild-
!!â‚¬ vuordil0-

!!$ vuordild-
!!$ vuordild-

"Word Final Cluster Simplification 2"                 ! attestit : attes
  Cx:0 <=> Vow ( %>: ) ( Â»: ( Â»: Â»: )) (W4:) s _ ( %>: ) ( Â»: ( Â»: Â»: )) [ Hyph | ( ğŸ˜± ) # ] ;
			where Cx in (t k m) ;
!!â‚¬ attest-
!!â‚¬ attes0-

!!$ attest-
!!$ attest-

"Word Final Cluster Simplification 3"                 ! beroÅ¡tit : beroÅ¡
  t:0 <=> Vow Å¡ _ ( %>: ) ( Â»: ( Â»: Â»: )) [ Hyph | ( ğŸ˜± ) # ] ;
!!â‚¬ beroÅ¡t#
!!â‚¬ beroÅ¡0#

"Word Final Cluster Simplification 4"                 ! bearjadahka : bearjadat
  Cx:0 <=> Vow h: ':0 _ ( %>: ) ( Â»: ( Â»: Â»: )) [ Hyph | ( ğŸ˜± ) # ] ;
			where Cx in (t k) ;
! Changing bearjadahk to bearjadah'k, adding ':0

!!â‚¬ bearjadah%'k-
!!â‚¬ bearjadat00-

!!$ bearjadah%'k-
!!$ bearjadat0k-

!!$ bearjadah%'k-
!!$ bearjadah00-

!!$ bearjadah%'k-
!!$ bearjadah0k-

!"Word Final Cluster Simplification 5"                 ! bearjadahka : bearjadat
!  h:t <=> Vow _ ':0 [t:0 | k:0] [ Hyph | ( ğŸ˜± ) # ] ;
! Splitting WFCF 4 into 2 to handle the inserted ':0 symbol.
! But this seems already covered by "Word Final Consonant Neutralization 1"


"Word Final Double Consonant Simplification"          ! muitaluss : muitalus
  Cy:0 <=> [ Vow: - Ã¡:  ] Cx: ( %>: ) _ ( %>: ) ( Â»: ( Â»: Â»: )) [ Hyph | ( ğŸ˜± ) # ] ;
			where Cx in (s Å¡ Å¾)
				  Cy in (s Å¡ Å¾)
			matched ;
!!â‚¬ muitaluss#
!!â‚¬ muitalus0#

!!$ vejolaÅ¾Å¾>-
!!$ vejolaÅ¾Å¾>-

!!â‚¬ vejolaÅ¾Å¾>-
!!â‚¬ vejolaÅ¡0>-

!!$ vejolaÅ¾Å¾>#
!!$ vejolaÅ¾0>#




! Consonant gradation rules
! -------------------------


!Now that long double cons. have been analyzed having lexical triple consonants,
!many of the grad. rules of the form ':Cx may be collapsed to a single rule
!without left context: _ Cx Vow: WeG: ; where XXXX matched ; . This has not
!been done yet (PS 29.11.1993).
! But the long double cons have not been analyzed as triple consonants!

"Gradation: h Loss"                                    ! johka : joga (h:0)
  h:0 <=> _ ': Cy: ( %>: ) ( Â»: ( Â»: Â»: )) Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;
			where Cy in (p t k c Ä) ;
!!â‚¬ joh'kaX4
!!â‚¬ jo00ga0

!!$ joh'kaX4
!!$ joh0ga0

!!$ joh'kaX4
!!$ jo00ka0

!!$ joh'kaX4
!!$ joh0ka0

"Gradation: Prenasal Stops"                           ! sÃ¡pmi : sÃ¡mi (p:0)
  Cx:0 <=> _ Cy Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;
			where Cx in (p t k)
			      Cy in (m n Å‹)
			matched ;

!!â‚¬ sÃ¡pmiX4
!!â‚¬ sÃ¡0mi0

!!$ sÃ¡pmiX4
!!$ sÃ¡pmi0


"Gradation: tnj"                                       ! latnja : lanja (t:0)
  t:0 <=> _ n j Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;
!!â‚¬ latnjaX4
!!â‚¬ la0nja0

"Gradation: dj"                                        ! vuodjit:vuojÃ¡n
  d:0 <=> Vow: _ ': j Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;
!!â‚¬ vuod'jiQ4n
!!â‚¬ vuo00jÃ¡0n

"Gradation: Double Consonant"                          ! kÃ¡ffe:kÃ¡fes
  Cx:0 <=> Vow: _ Cy ( %>: ) ( Â»: ( Â»: Â»: )) Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;
			where Cx in (Ä‘ f l m n Å‹ r s Å¡ Å§ v)
			      Cy in (Ä‘ f l m n Å‹ r s Å¡ Å§ v)
			matched ;
!!â‚¬ kÃ¡ffeX4s
!!â‚¬ kÃ¡0fe0s


! Note: I added a t rule, due to substandard Ruotta:Ruotas
"Gradation: Double t"
  t:0 <=> u o _ t a: ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;
!!â‚¬ RuottaX4s
!!â‚¬ Ruo0ta0s


!"Gradation: Å¡Å¾"  !Commented out because it causes wordforms like *muitalepmoÅ¾is. Instead we now have !this in lexicon:
!nju0nuÅ¡:njunnuÅ¡ MALIS ;
!nju0nuÅ¡:njunnuÅ¾ MALIS ; !SUB
! Cx:Cy <=> Vow: _ X2: Vow ( StemCns:) (:StemCns) ;	! njunnoÅ¡a:njunnoÅ¾is
!  Cx:Cy => Vow: _ X2: Vow ( StemCns:) (:StemCns) ;	! njunnoÅ¡a:njunnoÅ¾is
!		    where Cx in (Å¡)
!		          Cy in (Å¾)
!			matched ;
!!!â‚¬ njunnoÅ¡X2a
!!!â‚¬ njunnoÅ¾0a


"Gradation: Preaspirated Geminates"                    ! Ã¡hkku:Ã¡hkus
  Cx:0 <=> h _ Cy Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;
			where Cx in (k p t c Ä l r)
			      Cy in (k p t c Ä l r)
			matched ;
!!â‚¬ Ã¡hkkuX4s
!!â‚¬ Ã¡h0ku0s

"Gradation: Jodded Double Consonants"                       ! viellja:vieljas
  Cx:0 <=> Vow: _ Cy j Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;    ! mannji:manjis
			where Cx in (l d n)                 ! Ã¡ddjÃ¡:Ã¡djÃ¡s
			      Cy in (l d n)
			matched ;
!!â‚¬ vielljaX4
!!â‚¬ vie0lja0

!!â‚¬ mannjiX4
!!â‚¬ ma0nji0

!!â‚¬ Ã¡ddjÃ¡X4
!!â‚¬ Ã¡0djÃ¡0

"Gradation: Cluster Non-nasal Sonorant + Non-sonorant"      ! lÃ¡j'bi:lÃ¡ibbi
  ':Cx <=> Vow: [ g | l | r | Ä‘ | v | j: ] _ Cz Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;
			where Cx in (f g d b k p t z Å¾ c Ä s Å¡)
			      Cz in (f g d b k p t z Å¾ c Ä s Å¡)
			matched ;
! Added (Â¤:), evaluate! XXX. (Removed it since it caused CG in some PrsPrc.TO)
!!â‚¬ lÃ¡j'biX4
!!â‚¬ lÃ¡ibbi0

"Gradation: Cluster Å‹ + Non-sonorant"                      ! seaÅ‹'ga:seaÅ‹gga
  ':Cx <=> Vow: Å‹ _ Cz Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;   ! boÅ‹'kit:boÅ‹kkii
			where Cx in ( g k )
			      Cz in ( g k )
			matched ;
!!â‚¬ seaÅ‹'ga>X4
!!â‚¬ seaÅ‹gga>0

!!â‚¬ boÅ‹'ki>X4j#
!!â‚¬ boÅ‹kki>0i#

!!â‚¬ boÅ‹'ki>X4jmet#
!!â‚¬ boÅ‹kki>0imet#

"Gradation: Cluster ft:ftt"                      ! sÃ¡f'ta:sÃ¡ftta
  ':t <=> Vow: f _ t Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;

!!â‚¬ sÃ¡f'taX4
!!â‚¬ sÃ¡ftta0

"Gradation: Cluster bn:bnn"			! oab'na:oabnna
  ':n <=> Vow: b _ n Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;

!!â‚¬ oab'naX4
!!â‚¬ oabnna0

"Gradation: Cluster m + Non-sonorant"                       ! lÃ¡m'pa:lÃ¡mppas
  ':Cx <=> Vow: m _ Cz Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;    ! rÃ¡n'ska:rÃ¡nskkas
			where Cx in (f b p s Å¡ t)
			      Cz in (f b p s Å¡ t)
			matched ;
! mt : mtt added bec. of Ã¡mta:Ã¡mttas, although not in grammar. Check norm!
!!â‚¬ Ã¡m'taX4
!!â‚¬ Ã¡mtta0

! This rule only applies to lexical entries written with non-standard n.
! The rule itself is ok, and requried for proper gradation of the lexical
! entries. Thus, the rule is not in itself !SUB, but the entries in the
! lexicon are, and should be marked accordingly.
"Gradation: Cluster n + Non-sonorant"                      ! In'gÃ¡:InggÃ¡s
  ':Cx <=> Vow: n _ Cz Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;
			where Cx in ( g k )
			      Cz in ( g k )
			matched ;
!!â‚¬ In'gÃ¡X4
!!â‚¬ InggÃ¡0
! The proper way of writing is IÅ‹gÃ¡/IÅ‹ggÃ¡s. We add a substandard pattern with n here,
! as we have seen it in use (56 IngÃ¡, 18 InggÃ¡!).


"Gradation: Cluster n + Non-sonorant"                       ! gÃ¡n'da:gÃ¡nddat
  ':Cx <=> Vow: n _ Cz Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;
			where Cx in (d t z Å¾ c Ä s Å¡)
			      Cz in (d t z Å¾ c Ä s Å¡)
			matched ;
!!â‚¬ gÃ¡n'daX4
!!â‚¬ gÃ¡ndda0


"Gradation: Cluster p + t"                                  ! konseap'ta:konseapttat
  ':t <=> Vow: p _ t Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;
! Added because of this word. The pattern is not in the grammar.
!!â‚¬ konseap'taX4
!!â‚¬ konseaptta0


"Gradation: Cluster j/v + Liquid"                           ! Ã¡j'ru:Ã¡irrut
  ':Cx <=> Vow: [ j: | v ] _ Cz Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;
			where Cx in (l r)
			      Cz in (l r)
			matched ;
!!â‚¬ Ã¡j'ruX4
!!â‚¬ Ã¡irru0

!!â‚¬ biev'laX4
!!â‚¬ bievlla0

"Gradation: Cluster r + l"                           ! Ã¡j'ru:Ã¡irrut
  ':l <=> Vow: r _ l Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;

!!â‚¬ jar'laX4
!!â‚¬ jarlla0


"Gradation: Clusters lv, rj etc."                           ! ol'ju:oljjus
  ':Cx <=> Vow: [ Ä‘ | l | r | n ] _ Cz Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;
			where Cx in (v j)
			      Cz in (v j)
			matched ;
!!â‚¬ ol'juX4
!!â‚¬ oljju0


"Gradation: Clusters tk, tm"                                ! mÃ¡t'ki:mÃ¡tkkis
  ':Cx <=> Vow: [ t | Å§ ] _ Cy Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;
			where Cx in (k m)
			      Cy in (k m)
			matched ;
! Å§ is missing in the grammar. example?
!!â‚¬ mÃ¡t'kiX4
!!â‚¬ mÃ¡tkki0


"Gradation: Clusters ts"                               !
  0:s <=> Vow: t  _ s Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;

!!â‚¬ kreat0saX4
!!â‚¬ kreatssa0


"Gradation: Clusters sk, sm etc."                          ! beas'ka:beaskka
  ':Cx <=> Vow: [ s | Å¡ ] _ Cz: Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;
			where Cx in (b k p t l m v)
			      Cz in (b k p t l m v)
			matched ;
!!â‚¬ beas'kaX4
!!â‚¬ beaskka0


"Gradation: Cluster vj"                                    ! Äoav'ji:Äoavjji
  ':j <=> Vow: v _ j Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;
!!â‚¬ Äoav'jiX4
!!â‚¬ Äoavjji0


"Gradation: Cluster jv"                                    ! beaj'vi:beaivvit
  ':v <=> Vow: j: _ v Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;
!!â‚¬ beaj'viX4
!!â‚¬ beaivvi0

"Gradation: ihm, vhl etc."                                 ! dujh'mi:duihmmit
  ':Cx <=> Vow: [ j: | v ] h _ Cy Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;
			where Cx in (l m n)
			      Cy in (l m n)
			matched ;
!!â‚¬ dujh'miX4
!!â‚¬ duihmmi0


"Gradation: Clusters lbm, jdn, vdn etc."                   ! Äuolbma:Äuolmma
  Cx:Cy <=> [ l | j: | v | Ä‘ ] _ Cz Vow (Cns) ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;
			where Cx in (b d g )
			      Cy in (m n Å‹)
			      Cz in (m n Å‹)
			matched ;
!!â‚¬ ÄuolbmaX4
!!â‚¬ Äuolmma0

"Gradation: Clusters lm, jn, vn etc."                   ! DÃ¡lma:DÃ¡lmma
  ':Cx <=> [ l | j: | v ] _ Cy Vow (Cns) ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;
			where Cx in (m n)
			      Cy in (m n)
			matched ;
!!â‚¬ DÃ¡l'maX4
!!â‚¬ DÃ¡lmma0


! "(Cns)" is added. I do not like it. But the rule as it was blocked the
! "olmmoÅ¾in" essive of "olmmoÅ¡", since the "Å¾" was neither an underlying
! nor a surface stem consonant, I had to do something. The rule as it stands
! is meaningless, "(Cns)" contains both (StemCns:) and (:StemCns).
! Think through this.


"Gradation: Clusters ldnj, vdnj etc."                      ! sÃ¡vdnji:sÃ¡vnnji
  d:n <=> [ l | v ] _ n j Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;
!!â‚¬ sÃ¡vdnjiX4
!!â‚¬ sÃ¡vnnji0


"Gradation: Clusters rbm, rdn rgÅ‹"                        ! Äorbma:Äorpma
  Cx:Cy <=> r _ Cz Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;
			where Cx in (b d g)
			      Cy in (p t k)
			      Cz in (m n Å‹)
			matched ;
!!â‚¬ ÄorbmaX4
!!â‚¬ Äorpma0


"Gradation: Clusters rdnj"                                 ! skurdnji:skurtnji
  Cx:Cy <=> r _ Cz j Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;
			where Cx in (b d g)
			      Cy in (p t k)
			      Cz in (m n Å‹)
			matched ;
!!â‚¬ skurdnjiX4
!!â‚¬ skurtnji0


"Gradation: ist, vsk etc."                                 ! nÃ¡vs'tu:nÃ¡vsttu
  ':Cx <=> Vow: [ j: | v | l | r | m | n ] s _
                Cy Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;
			where Cx in (k t)
			      Cy in (k t)
			matched ;
!!â‚¬ nÃ¡vs'tuX4
!!â‚¬ nÃ¡vsttu0

"Gradation: rÅ¡t, rÅ¡k, mÅ¡k, rÅ¡k"                      ! borÅ¡'ta:borÅ¡tta
  ':Cx <=> Vow: [  r | m  ] Å¡ _
                Cy Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;
			where Cx in (k t)
			      Cy in (k t)
			matched ;
!!â‚¬ borÅ¡'taX4
!!â‚¬ borÅ¡tta0

!"Gradation: mÅ¡k, rÅ¡k"                                    ! limÅ¡'ki:limÅ¡kki
!  ':k <=> Vow: [ m | r ] Å¡ _ k Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;
!!â‚¬ limÅ¡'kiX4
!!â‚¬ limÅ¡kki0


"Gradation: Clusters kc ks etc. 1"                         ! uk'sa:uvssa
  k:v <=> Vow: _ ': Cx Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;
			where Cx in (t c Ä s Å¡) ;
!!â‚¬ uk'saX4
!!â‚¬ uvssa0


"Gradation: Clusters kc ks etc. 2"                         ! uk'sa:uvssa
  ':Cx <=> Vow: k: _ Cy Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;
			where Cx in (t c Ä s Å¡)
			      Cy in (t c Ä s Å¡)
			matched ;

"Gradation: Cluster kst 1"                                 ! teaks'ta:teavstta
  k:v <=> Vow: _ s ': t Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;
!!â‚¬ teaks'taX4
!!â‚¬ teavstta0


"Gradation: Cluster kst 2"                                 ! teaks'ta:teavstta
  ':t <=> Vow k: s _ t Vow: ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;

"Gradation: bb dd etc.1"                                   ! spÃ¡bba:spÃ¡ppat
  Cx:Cy <=> Vow: _ Cz: ( %>: ) ( Â»: ( Â»: Â»: )) Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;
			where Cx in (b d g z Å¾)
			      Cy in (p t k c Ä)
			      Cz in (b d g z Å¾)
			matched ;
!!â‚¬ spÃ¡bbaX4
!!â‚¬ spÃ¡ppa0


"Gradation: bb dd etc.2"                                   ! spÃ¡bba:spÃ¡ppat
  Cx:Cy <=> Vow: :Cy _ ( %>: ) ( Â»: ( Â»: Â»: )) Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) ;
			where Cx in (b d g z Å¾)
			      Cy in (p t k c Ä)
			matched ;

!!$ Szczecin
!!$ Szccecin

!!â‚¬ Szczecin
!!â‚¬ Szczecin

"Gradation: dn to tn, etc."                                ! eadni:eatni
  Cx:Cy <=> Vow: _ Cz: Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;
			where Cx in (b d g )
			      Cy in (p t k )
			      Cz in (m n Å‹)
			matched ;
!!â‚¬ eadniX4
!!â‚¬ eatni0


"Gradation: dnj to tnj"                                    ! boadnji:boatnji
  d:t <=> Vow: _ n j Vow ( StemCns:) ( %>: ) ( Â»: ( Â»: Â»: )) (:StemCns) WeG: ;
!!â‚¬ boadnjiX4
!!â‚¬ boatnji0



! Lengthening of consonants
! -------------------------

! This takes place in certain verb forms, e.g. imperative and certain
! nominalisation forms.

"Lengthening of Central Consonants hk etc."                ! boah'tiY1:boahtti
  ':Cy <=> h: _ Cz Vow ( CntrCns:) ( %>: ) ( Â»: ( Â»: Â»: )) Len: ( Â»: ( Â»: Â»: )) ;
			where Cy in (p t k c Ä)
			      Cz in (p t k c Ä)
			matched ;
!!â‚¬ boah'tiY1
!!â‚¬ boahtti0

!!â‚¬ dah'kaY7j#
!!â‚¬ dahkku0i#

!!â‚¬ dah'ka>Y7jmet#
!!â‚¬ dahkku>0imet#


"Lengthening of Central Consonants pm etc."                ! dapmaY1:dabmi
  Cx:Cy <=> Vow: _ Cz Vow ( CntrCns:) ( %>: ) ( Â»: ( Â»: Â»: )) Len: ( Â»: ( Â»: Â»: )) ;
			where Cx in (p t k )
			      Cy in (b d g )
			      Cz in (m n Å‹)
			matched ;
!!â‚¬ dapmaY1
!!â‚¬ dabmi0

"Lengthening of Central Consonants tnj"
  t:d <=> Vow: _ n j Vow ( CntrCns:) ( %>: ) ( Â»: ( Â»: Â»: )) Len: ( Â»: ( Â»: Â»: )) ;
!!â‚¬ bitnjuY1
!!â‚¬ bidnju0

"Lengthening of Central Consonants dj"                     ! dad'jaY1:daddji
  ':d <=> Vow: d _ j Vow ( CntrCns:) ( %>: ) ( Â»: ( Â»: Â»: )) Len: ( Â»: ( Â»: Â»: )) ;
!!â‚¬ dad'jaY1
!!â‚¬ daddji0




! Lenition
! --------

"Lenition: Intervocalic Stops and Affricates"              ! joh'kaX4:jo00ga
  Cx:Cy <=> h:0 ':0 _ ( %>: ) ( Â»: ( Â»: Â»: )) Vow ( %>: ) ( Â»: ( Â»: Â»: )) ;
			where Cx in (k p c Ä t)
			      Cy in (g b z Å¾ Ä‘)
			matched ;
!!â‚¬ joh'kaX4
!!â‚¬ jo00ga0


! Here, the k is reduced to g as an automatic result of the h deletion in the
! "Gradation: h loss" rule.


!"Three-part compounding: Consonant geminates"						! giella:giel
! Cx:0 <=> Vow: _ Cy: Vow WeG: ;
! 			where Cx in (l r)
! 				  Cy in (l r)
!			matched ;

!"Three-part compounding: Consonant geminates II"					! giella:giel
! Vx:0 <=> Vow: Cx Cx _ ;
! 			where Vx in (a e i o u)
! 				  Cx in (l r) ;


!"Three-part compounding: -iv- consonant center"					! oaivi:oai
! v:0 <=> i: _ Vow WeG: ;

!"Three-part compounding: -iv- consonant center II"					! oaivi:oai
! i:0 <=> i: v:0 _ WeG: ;



!Vowel shortening
!----------------


! Nouns

"Vowel Shortening in Compounds of Contract Stems"
  Vx:Vy <=> [ (Vow) Vow | Ã¡ ] Cns:+ Cns: _ (Â¤:) (StemCns:*) ( %>: ) ( Â»: ( Â»: Â»: )) [X4: X7:|X8:] ;
	    where Vx in (u i i7)
	          Vy in (o e e)
	    matched ;

"Allegro Forms in Compounds"                   ! gÃ¡v'piX7:gÃ¡v0pe
 Vx:Vy <=> Cns:+ _ ( %>: ) ( Â»: ( Â»: Â»: )) (Â¤:) (StemCns:*) ( %>: ) ( Â»: ( Â»: Â»: )) X7: ;
           where Vx in (i u Ã¡ i7)
                 Vy in (e o a e)
           matched ;

!!â‚¬ gÃ¡v'piX7
!!â‚¬ gÃ¡v0pe0

!!â‚¬ bassiX7
!!â‚¬ basse0





! Overlapping => constraint wrt. 'i:e', Optional Vow Shortening
! After short 1st Syllable
! The Â¤: condition was added in order to account for VIVVA nouns.
! First, it was added as optional, with parentheses, but that did not
! work, for some strange reason. Then the parentheses were removed, and to our
! surprise both forms with and without Â¤ worked.
! And parantheses in again. Sigh.


!"Optional Vowel Shortening after Short 1st Syllable"
! Vx:Vy => [ Hyph | #  | Cns ] [a|i|o|u] [ Cns Cns:+ | j: Cns:+ | h: ': Cns: ]
! Vx:Vy => [ Hyph | #  | Cns ] [a|i|o|u] [ Cns Cns:+            | h: ': Cns: ]
!	_ (StemCns:*) [ X7: | X8: ] ;
!	   where Vx in (u i)
!	         Vy in (o e)
!	   matched ;
! Added + to Cns:+ and made StmCns: optional in LC, for biv'du:bivdo
! Onset relevant?



!"Shortening of Ã¡ in Compounds after Long 1st Syllable 1"
!  Ã¡:a <=> [ Vow Vow | Ã¡ ] Cns:+ Cns _ StemCns:* [ X7: | X8: ] ;



!"Shortening of Ã¡ in Compounds after Long 1st Syllable 2"
!  Ã¡:a <=> [ Hyph | #  | Cns ] Vz Cns+ Cns: Cns+ _ StemCns:* [ X7: | X8: ]
!        where Vz in (a i o u) ;

!"Vowel lowering for buorre"
! Vx:Vy <=> [ Vow Vow | Ã¡ ] Cns:+ Cns _ X8: ;
!         where Vx in (u i)
!	       Vy in (o e)
!	         matched ;
! This rule was actually made for one word only, buorre:buoret
! It replaces the missing "| X8:" sequence that is commented out in the
! "Vowel shortening ... 1" rule above. Why X8: does not work there is unclear.
! It seems to work in certain other cases, though.
!!â‚¬ buorriX7
!!â‚¬ buorre0

!!â‚¬ buorriX8
!!â‚¬ buo0re0


!"Vowel Shortening in Vowel-Final Compounds after Long 1st Syllable 1"
!  Vx:Vy <=> [ Vow Vow | Ã¡ ] Cns:+ Cns: _ X7: ;
!	where Vx in (u i)
!	      Vy in (o e)
!	matched ;
! This rule was difficult. Look at *)footnote 1 below for comments.
! *) footnote 1
! Older, removed versions:
! Vx:Vy <=> [ Vow Vow | Ã¡ ] Cns:+ Cns: _ StemCns:* X7: ;
! This one gave vuovden# as only possible form of vuovdin in compounds.
! Vx:Vy <=> [ Vow Vow | Ã¡ ] Cns:+ Cns _ StemCns:* [ X7: | X8: ] ;
! the problem with this one was that it was not restricted to compounds !!
! The X7: | X8: line was commented out since no lexicon in sme-lex.txt
! pointed from X8 to R. This move should be checked for compounds later.
! The testcases are kept here to ensure that its workload is being taken care of.
!!â‚¬ vÃ¡rriX7gir'ku
!!â‚¬ vÃ¡rre0gir0ku


!"Vowel Shortening in Compounds after Long 1st Syllable 2"
!  Vx:Vy <=> [ Hyph | # | Cns ] Vz Cns+ Cns: Cns+ _ StemCns:* [ X7: | X8: ] ;
!	where Vz in (a i o u) ;
!	where Vx in (u i)
!			             Vy in (o e)
!					   matched ;
! XXX Remainder! This rule is commented out since including it
! spoils the i:Ã¡ alternation of verbs (boahtit:boaÄ‘Ã¡n, for some reason.
! This should be looked into.

!"Vowel Shortening in Cns-Final Compounds"
!  Vx:Vy <=> Cns:+ _ StemCns:+ X7: ;
!	   where Vx in (u i)                  ! example?
!		     Vy in (o e)
!       matched ;
! This is for the vuovdin# and vuovden#, if vuovden# exists.
! If vuovden# etc. is not possible, this rule should be removed.


!"Vowel Shortening in Compounds of Contract Stems"
!  Vx:Vy <=> [ Vow Vow | Ã¡ ] Cns:+ Cns: _ StemCns:* X4: X7: ;
!	    where Vx in (u i)
!	          Vy in (o e)
!	    matched ;

!"Compulsory Vowel Shortening after ij"                ! liigi : liigeruÄ‘aid
! Vx:Vy <=> [ Hyph | # | Cns ] i j:i Cns:* _ [ X7: | X8: ] ;
!	   where Vx in (u i)
!	         Vy in (o e)
!	   matched ;
! The rule is too general at the moment, since we do not have illu : illosÃ¡hka,
! Now, we have "Cns:*", the earlier version said "': Cns", and that was wrong,
! it did not give liidni > liidne-. Still, *illo- must be a different problem,
! since it has short vowel before the consonants. I leave the rule as it is now
! and reconsider the illu case.
!!â‚¬ lijgiX7#ruh'taX4jd
!!â‚¬ liige0#ru00Ä‘a0id

!FOLLOWING TwO RULES COMMENTED OUT BECAUSE THEY ARE TOO CATEGORICAL,
! new rules under optional vowelshortening e:i, u:o
!"Optional Vowel Shortening in Caritives"
!  Vx:Vy => [ Hyph | # | Cns ] [a|i|o|u] Cns:+ _ ( DelCns:) X9: ;
!	   where Vx in (u i)
!		 Vy in (o e)
!	   matched ;
! Hmm. X9 is used only in the DenominalAdjsV lexicon., in front of
! heapmi, huvva, huhtti, hudda.

!"Vowel Shortening in Caritives"
!  Vx:Vy <=> [ Vow Vow | Ã¡ ] Cns:+ _ ( DelCns:) X9: ;
!	    where Vx in (u i)
!	          Vy in (o e)
!	    matched ;



! Verbs

"Vowel Shortening in Bisyllabic Sg2 Imperatives and Connegatives"
  Vx:Vy <=> Cns _ ( %>: ) ( Â»: ( Â»: Â»: )) Q6: ;
	    where Vx in (u i)                  ! Äuor'vu:Äuorvvo
	          Vy in (o e)                  ! boah'ti:boaÄ‘e
	    matched ;
!!â‚¬ Äuor'vuQ6
!!â‚¬ Äuorvvo0


!!â‚¬ boah'tiQ6
!!â‚¬ boa00Ä‘e0


! Adjectives

"Vowel Shortening in Attributive Forms, V-final Adjectives" ! lÃ¡j'kiW1s:lÃ¡ikkes
  Vx:Vy <=> Cns:+ _  ( %>: ) ( Â»: ( Â»: Â»: )) [ W1: | W2: ] s [ ( Â»: Â»: Â»: ) ( ğŸ˜± ) # | Hyph ] ; ! Ã¡l'kiW2s:Ã¡lkes
	    where Vx in (u i)
	          Vy in (o e)
	    matched ;

!!â‚¬ lÃ¡j'kiW1s#
!!â‚¬ lÃ¡ikke0s#

!!â‚¬ Ã¡l'kiW2s#
!!â‚¬ Ã¡l0ke0s#

                        ! W1 for WeG Attr, W2 for non-CG Attr form.

"Vowel Shortening in Attributive Forms, s-final Adjectives" ! vÃ¡ttisW1:vÃ¡ttes W2??
   Vx:Vy <=> Cns:+ _  s ( %>: ) ( Â»: ( Â»: Â»: )) W1:( Â»: ) ([ Hyph | ( ğŸ˜± ) # ]) ; ! trying to get heajos-biila as well as heajosbiila
	    where Vx in (u i)
		      Vy in (o e)
		matched ;
!  Vx:Vy <=> Cns:+ _  ( %>: ) ( Â»: ( Â»: Â»: )) s W1: ; ! [ Hyph | ( ğŸ˜± ) # ] ;  ! orig

!!â‚¬ vÃ¡ttisW1
!!â‚¬ vÃ¡ttes0

!!â‚¬ head'jusW1-
!!â‚¬ hea00jos0-

!!â‚¬ head'jusW1
!!â‚¬ hea00jos0

!!â‚¬ vÃ¡ttisW1-
!!â‚¬ vÃ¡ttes0-


! The rule now works for all "s W1:" right contexts. This means that ess of
! guorus becomes guorrosin, as required. Check for side-effects.


"Optional vowel-shortening i:e"
 i:e => Cns:+ _ (Cns:) ( %>: ) ( Â»: ( Â»: Â»: )) (X4:) W4: ;   !in diminutive verbs, caritives


"Optional vowel-shortening u:o"
 u:o => Cns:+ _ (Cns:) ( %>: ) ( Â»: ( Â»: Â»: )) (X4:) W4: ; !Diminutive geaffut:geafustit/geafostit, caritives


! Diphtong simplification
! -----------------------



"Diphthong Simplification in i-Stems before Suffixes Beginning with j:"
!  Vx:0 <=> Vow _ Cns:+ [ i | e7:i ] X5: ; ! Cannot see why e7:1 here. Thj
  Vx:0 <=> Vow _ Cns:+  [ i | e:i ]  ( %>: ) ( Â»: ( Â»: Â»: )) [ X5: | %^DISIMP: ] j: ; ! For some reason the e7:i here triggers optional forms to all verbs; naskke7stit, nahke7hit, niestte7huvvat, badje7lduolbmat etc etc -> naskkistit, nahkihit, niesttihuvvat, badjilduolbmat.
!  Vx:0 <=> Vow _ Cns:+   :i   ( %>: ) ( Â»: ( Â»: Â»: )) [ X5: | %^DISIMP: ] ;
	where Vx in (e o a) ;          ! goah'tiX5jd:go0Ä‘iid
! Cf. alt 2 below...

!!â‚¬ goah'tiX5jd
!!â‚¬ go000Ä‘i0id

!!!â‚¬ bealle7>X5jd
!!!â‚¬ be00li>0id

!"e7 as i in suffixes"
!e7:i <=> _ (Dummy:) j: ;

! Two possible strategies for fixing bug 56, the oahpaheaddjiid bug:
! ------------------------------------------------------------------
! 1. lexical strategy: XX instead of X5, and marking in the lexicon
! PrsPtc then do not go to GOAHTI, but to OAHPAHEADDJI, and point to
!  :XX GODII- ; ! weak gr dipth simpl
!"Optional Diphthong Simplification in Strong-Grade i-Stems before Suffixes Beginning with j:"
!  Vx:0 => Vow _ Cns:+ [ i | e7:e ] XX: ; !XX is just an example of how we might do it...
!	where Vx in (e o a) ;          ! goah'tiX5jd:go0Ä‘iid
! pro: do not need to define G3.
! pro: Opens for lexical variation: moarsi, etc, PrsPtc, Comp must be marked XX or redirected
! con: have to build a set of new lexica, identical to GOAHTI, except for the ref to GODII.
! con: gives a lexical solution to a basically morphophonological problem

! 2. morphophonological strategy, the smj way.
! Define a G3 context, and integrate it into a further rule
!"Optional Diphthong Simplification in Strong-Grade i-Stems before Suffixes Beginning with j:"
!  Vx:0 => Vow _ G3 [ i | e7:e ] X5: ; !G3 to be defined...
!	where Vx in (e o a) ;          ! goah'tiX5jd:go0Ä‘iid
! pro: linguistically the right approach, says intuition
! pro: no need for confusing new lexica
! con: defining G3 is a mess, at best
! We have optional dipht. simpl. only in G3-nouns and no cons grad.

! Going for 2:

!"G12 Compulsatory Diphthong Simplification in i-Stems before Suffixes Beginning with j:"
!  Vx:0 <=> Vow _ G12 [ i | e7:e ] X5: ;
!	where Vx in (e o a) ;          ! goah'tiX5jd:go0Ä‘iid

!"G3 Facultative Diphthong Simplification in i-Stems before Suffixes Beginning with j:"
!  Vx:0 => Vow _ G3 [ i | e7:e ] X5: ;
!	where Vx in (e o a) ;          ! goah'tiX5jd:go0Ä‘iid

!Using this one while waiting for the G3 rule to be fixed.
!"Diphthong Simplification in i-Stems before Suffixes Beginning with j:"
!  Vx:0 => Vow _ Cns [':Cns|Cns] Cns:+ [ i | e7:e ] X5: ;
!	where Vx in (e o a) ;          ! goah'tiX5jd:go0Ä‘iid





"Diphthong Simplification in Actor Nouns from i- and a-Stems - obl, norm" ! vieh'ki > vihkkiin
  Vx:0 <=> Vow _ Cns:+ [ i: | a: ] ( %>: ) Â¤: ( %>: ) ( Â»: ( Â»: Â»: )) %^DISIMP: ;
			where Vx in (e o a) ;				                          ! Western and norm

"Diphthong Simplification in Actor Nouns from i- and a-Stems - optional, sub" ! vieh'ki > vihkkiin
  Vx:0  => Vow _ Cns:+ [ i: | a: ] ( %>: ) Â¤: ( %>: ) ( Â»: ( Â»: Â»: )) X5: ;        !           viehkkiin
			where Vx in (e o a) ;				                              ! Eastern, substandard

!!â‚¬ vieh'kiÂ¤X5jn
!!â‚¬ vi0hkki00in

"Diphthong Simplification in Certain Forms of u-Stems"
  Vx:0 <=> Vow _ Cns:+ [ u: | o7: ] ( %>: ) ( Â»: ( Â»: Â»: ))
                         [ X3: | (DelCns:) ( %>: ) ( Â»: ( Â»: Â»: )) X6: | Q8: | Y5: | Y6: ] ;
			where Vx in (e o a) ;

"Diphthong Simplification in Certain Forms of u-Stems only X2" ! pga konflikt med illative only-regel
  Vx:0 <=> Vow _ Cns:+ [ u: | o7: ] ( Â¤: ) ( %>: ) ( Â¤: ) ( Â»: ( Â»: Â»: ))
                         [ X2: ] ;
			where Vx in (e o a) ;


"Diphthong Simplification in Actor Nouns from u-Verbs - optional, sub"
  Vx:0 => Vow _ Cns:+ u:  ( %>: ) Â¤: ( %>: ) ( Â»: ( Â»: Â»: )) X5: ;   ! Eastern, substandard
			where Vx in (e o a) ;

"Diphthong Simplification in Actor Nouns from u-Verbs - opt, sub"
  Vx:0 <=> Vow _ Cns:+ u:  ( %>: ) Â¤: ( %>: ) ( Â»: ( Â»: Â»: )) X3: ;  ! Illative onlyl
			where Vx in (e o a) ;


"Diphthong Simplification in Diminutives etc. from Trisyllabics with 2nd Syll u/o"
  Vx:0 <=> Vow _ Cns:+ [ u: | o7: ]  ( %>: ) ( Â»: ( Â»: Â»: )) ( NonMPDummy:) Cns:+  ( %>: ) ( Â»: ( Â»: Â»: )) X2: ;
			where Vx in (e o a) ;

"Diphthong Simplification: Conditional in -alla- etc. Derivatives from Trisyllabics"
  Vx:0 <=> Vow _ Cns:+ [u:o | o7: ] ( %>: ) ( Â»: ( Â»: Â»: )) ( NonMPDummy:) Cns:+ ( %>: ) ( Â»: ( Â»: Â»: )) X1: ;
			where Vx in (e o a) ;

"Diphthong Simplification in IllSg and Certain Conjug. Forms of a-Stems"
  Vx:0 <=> Vow _ Cns:+ a:  ( %>: ) ( Â»: ( Â»: Â»: )) [ X3: | Q2: | Q3: | Y7: ] ;
			where Vx in (e o a) ;

"Diphthong Simplification in Certain Conjugational Forms of i- and u-Stems"
  Vx:0 <=> Vow _ Cns:+ HighVow:  ( %>: ) ( Â»: ( Â»: Â»: )) [ Q2: | Q3: | Q7: [Å¡:|Å¾:]| Y7: ] ;
			where Vx in (e o a) ;

"Diphthong Simplification: Optional before Deverbal -alla-, -adda-, -us"
  Vx:0 => Vow _ Cns:+ o7: ( %>: ) ( Â»: ( Â»: Â»: )) ( NonMPDummy:) Cns:+ ( %>: ) ( Â»: ( Â»: Â»: )) X1: ;
			where Vx in (e o a) ;

"Diphthong Simplification in u-Stems before Conditional Marker"
  Vx:0 => Vow _ Cns:+ u: ( %>: ) ( Â»: ( Â»: Â»: )) Q5: ;
			where Vx in (a e o) ;

"Dipthtong simplification in the attribute forms of AD-adjectives"
  Vx:0 <=> Vow _ Cns:+ Vow ( %>: ) ( Â»: ( Â»: Â»: )) [ Y9: | X9: ] ;
		       where Vx in (a e o) ;

"Diphthong Simplification: Optional before Deverbal st+alla-, st+adda-"
  Vx:0 => Vow _ Cns:+ u:o ( %>: ) ( Â»: ( Â»: Â»: )) W5: ;
			where Vx in (e o a) ;


! Vowel Rising
! ------------

"Vowel Rising"
  Vx:Vy <=> Vow: (Cns:*) (%^:) Cns:+ _ ( CntrCns:0 ) ( %>: ) ( Â»: ( Â»: Â»: )) ( Dummy:+) j:i ;
			where Vx in (e o)
			      Vy in (i u)
			matched ;

! There is a conflict between e7:i here and e7:Ã¡ in the Metaphony
! chapter. (e7 is "e with dot below" from the dictionary).
! We need to either restrict the context in the M chapter, or
! in the Vowel Rising part. For now, we try out without the e7:i.
! Needed: Documentation on all the rules in the M chapter.
!			where Vx in (e o e7)
!			      Vy in (i u i )

! The original version had Vx = e,o for Vowel Rising and
! Vx = i,e7,u for General metaphony. Thus, the new feature is
! e7 for Vowel rising.

!!â‚¬ boah'ti>^DISIMPjmet#
!!â‚¬ bo000Ä‘i>0imet#

!!â‚¬ reÅ‹'ko>X2jd#
!!â‚¬ reÅ‹0ku>0id#

!!â‚¬ baste>X2j#
!!â‚¬ basti>0i#

!!â‚¬ asi#bealli>^DISIMPjde#
!!â‚¬ asi#be00li>0ide#
! Note. This will fail for now.
! -bealle +sg.ill = -beallÃ¡i, +pl. ill = -beliide,

!!â‚¬ Line>X2j#
!!â‚¬ Lini>0i#

! should be Linii, exactly, fine, and is as well.

! Metaphony
! ---------

"General Metaphony"
  Vx:Vy <=> Cns _ Cns:* ( %>: ) ( Â»: ( Â»: Â»: )) [ X2: | X6: ] ;
			where Vx in (i e7 u)
			      Vy in (Ã¡ Ã¡ o)
			matched ;

!!â‚¬ Ã¡hÄÄiX2n
!!â‚¬ Ã¡hÄÄÃ¡0n

!"e7 Rising" ! Awaiting discussion.
!  e7:i <=> Vow: Cns:+ _ ( CntrCns:0 ) ( Dummy:+ - W9: - X2: - X6: ) j:i ;
!outcommented due to bug1375



"Metaphony in Derivatives -us, -alla, -adda 1"
  u:o => Cns _ ( %>: ) ( Â»: ( Â»: Â»: )) ( NonMPDummy2:) Cns:+ ( %>: ) ( Â»: ( Â»: Â»: )) X1: ;
! Here I have a new set, NonMPDummy2, without X7 and X8, to avoid clash with
! the allegro shortening rule. Check for alternative solutions !!!

"Metaphony in Derivatives -us, -alla, -adda 2"
  Vx:Ã¡ <=> Cns _ ( %>: ) ( Â»: ( Â»: Â»: )) ( NonMPDummy2:) [ Cns: - j: ] (Cns) ( %>: ) ( Â»: ( Â»: Â»: )) X1: ;
			where Vx in (i e7) ;

"Illative Singular Metaphony"
  Vx:Vy <=> Cns ( %>: ) ( Â»: ( Â»: Â»: )) _ ( %>: ) ( Â»: ( Â»: Â»: )) X3: ;
			where Vx in (i a e7)
			      Vy in (Ã¡ i Ã¡ )
			matched ;

!!â‚¬ stahta>X3j#
!!â‚¬ stahti>0i#

!"Illative Singular Metaphony2" !because of STAHTA: stahtai, commented out beacause -ai illative is only for iija-words
!  Vx:Vy <=> Cns _ ( %>: ) ( Â»: ( Â»: Â»: )) W9: ;
!            where Vx in (i e7)
!	              Vy in (Ã¡ Ã¡ )
!			matched ;

! Commented in again for the sake of Sijte.
!Now Fixed in lexicon

!!â‚¬ Sij9te>i#
!!â‚¬ Sijte>i#

"Metaphony in Px Contexts of Actor Nouns of i-, a-, and u-Verbs"
Vx:Vy <=> Cns _  ( %>: ) Â¤: ( %>: ) ( Â»: ( Â»: Â»: )) [ X2: | X6: ] ;
			where Vx in (i a u)
			      Vy in (Ã¡ Ã¡ o)
			matched ;

"Metaphony in Illative of Actor Nouns of i-, a-, and u-Verbs"
Vx:Vy <=> Cns _  ( %>: ) Â¤: ( %>: ) ( Â»: ( Â»: Â»: )) X3: ;
		       where Vx in (i a )
			     Vy in (Ã¡ Ã¡ )
		       matched ;

!"Metaphony in Actor Nouns of i-, a-, and u-Verbs"
!  Vx:Vy <=> Cns _  ( %>: ) Â¤: ( %>: ) ( Â»: ( Â»: Â»: )) [ X2: | X3: | X6: ] ;
!			where Vx in (i a ) !u)
!			      Vy in (Ã¡ Ã¡ ) !o)
!			matched ;

"Metaphony in MUSH-Derivatives"
  i:Ã¡ => Cns _ ( %>: ) ( Â»: ( Â»: Â»: )) m: u: Å¡: Å¡: ;

"Potential Marker Metaphony"
  Vx:Vy <=> Cns _ ( %>: ) ( Â»: ( Â»: Â»: )) Q7: [Å¡:|Å¾:];
			where Vx in (i u)
			      Vy in (e o)
			matched ;



! Stem vowel alternations
! -----------------------

"Stem Vowel in Contracted Stems"                ! fijdnisY5t:fiidnÃ¡t
  Vx:Vy <=> Cns _ ( CntrCns:) ( %>: ) ( Â»: ( Â»: Â»: )) Y5: ;
			where Vx in (i a u)
			      Vy in (Ã¡ Ã¡ o)
			matched ;
!!â‚¬ fijdnisY5t
!!â‚¬ fiidnÃ¡00t


"Stem Vowel before Frequentative d"             ! oaÅ¾Å¾ut:oÄÄodit
  Vx:Vy <=> Cns _ ( %>: ) ( Â»: ( Â»: Â»: )) Q8: ;                         ! coahkut:coagostit
			where Vx in (u)
			      Vy in (o)
			matched ;
! Note that this rule also triggers other contexts than frequentative -d-
!!â‚¬ oaÅ¾Å¾uQ8dit
!!â‚¬ o0ÄÄo0dit

!!â‚¬ coah'kuX8stit
!!â‚¬ coa00go0stit

!"Stem Vowel before Frequentative l"
!  i:a <=> Cns _ Q9: ;
! This rule is not implemented, there is no Q9 in the sme-lex.txt file (yet).

!"Stem Vowel before Reflexive s"
!  Vx:Vy <=> Cns _ Y8: ;
!			where Vx in (i u)
!			      Vy in (Ã¡ a)
!			matched ;
! This rule is not implemented, there is no Y8 in the sme-lex.txt file (yet).

"Indicative Present Singular 3rd Final Vowel"      ! jearraQ1:jearrÃ¡
  Vx:Ã¡ <=> Cns _ ( %>: ) ( Â»: ( Â»: Â»: )) Q1: ;                             ! boahtiQ1:boahtÃ¡
			where Vx in (a i) ;
!!â‚¬ jearraQ1
!!â‚¬ jearrÃ¡0

!!â‚¬ boah'tiQ1
!!â‚¬ boah0tÃ¡0


"Imperative Present 1st/3rd Person and Connegative Final Vowel"
  Vx:o <=> Cns _ ( %>: ) ( Â»: ( Â»: Â»: )) Q3: ;                             ! jearraQ3n:jerron
			where Vx in (a i u) ;                  ! boahtiQ3n:bohton
                                                   ! ÄuorvuQ3n:Äurvon
!!â‚¬ jearraQ3n
!!â‚¬ je0rro0n

!!â‚¬ jearraQ2t
!!â‚¬ je0rre0t

!!â‚¬ boah'tiQ3n
!!â‚¬ bo0h0to0n

!!â‚¬ Äuor'vuQ3n
!!â‚¬ Äu0r0vo0n


"Stem Vowel Shift a:e, i:e, u:o"                   ! jearra:jerre
  Vx:Vy <=> Cns _ ( %>: ) ( Â»: ( Â»: Â»: )) Q2: ;                            ! boahtit:bohtet
			where Vx in (a i u)                    ! Äuorvu:Äurvo
			      Vy in (e e o)
			matched ;
! This is for Prs Du1, Pl3, and 2nd Person Imperative
!!â‚¬ jearraQ2
!!â‚¬ je0rre0

!!â‚¬ boah'tiQ2t
!!â‚¬ bo0h0te0t

!!â‚¬ Äuor'vuQ2
!!â‚¬ Äu0r0vo0


"Stem Vowel shift i:Ã¡"
  i:Ã¡ <=> Cns _ ( %>: ) ( Â»: ( Â»: Â»: )) [ Q4: | Q5: ] ; !1st and 2nd Person Singular Present/before Conditional Marker
         Cns:+ _ ( %>: ) ( Â»: ( Â»: Â»: )) W5: ; !Dim-freq verbs
         Cns:+ _ ( %>: ) ( Â»: ( Â»: Â»: )) W6: ; !Sub-freq verbs
!!â‚¬ boah'tiQ4n
!!â‚¬ boa00Ä‘Ã¡0n

!!â‚¬ boah'tiQ5lin
!!â‚¬ boa00Ä‘Ã¡0lin

"Stem Vowel shift u:o"
 u:o <=> Cns:+ _ ( %>: ) ( Â»: ( Â»: Â»: )) [ W5: | W7: ] ; !Dim-freq verbs, geaffut:geafostallat + stuvvat.

"Stem Vowel shift i:e"
 i:e <=> Cns:+ _ ( %>: ) ( Â»: ( Â»: Â»: )) W7: ; !!Dim-freq verbs, geaffut:geafostallat + stuvvat.
         Cns:+ _ ( %>: ) ( Â»: ( Â»: Â»: )) W8: ; ! Deverbal nouns -meahttun



!"Stem Vowel before Conditional Marker"              ! boahtit:boaÄ‘Ã¡lin
!   i:Ã¡ <=> Cns _ Q5: ;         !Collapsed into one rule, see above
!  Vx:Vy <=> Cns _ Q5: ;                            ! The u:o alternation
!			where Vx in (u i)           ! removed because it gave
!			      Vy in (o Ã¡)           ! *Äuorvvolin, but Nickel
!			matched ;                   ! gives Äuorvvulin.


"Stem Vowel in Dual 2nd Person Imperative"          ! jearra:jearri
  a:i <=> Cns _ ( %>: ) ( Â»: ( Â»: Â»: )) Y1: ;
!!â‚¬ jearraY1
!!â‚¬ jearri0

!ska vara: viehkat->viehkki
!status: viehkat->viehkkimuorra/viehkkamuorra

!ska vara: viehkkaÂ¤ -> viehkki
!status: vieh'kaÂ¤ -> viehkkimuorra/viehkkamuorra

! vieh'kaÂ¤>ğŸ˜±#

"Stem Vowel in Present Participials from i-Verbs"
  a:i <=> Cns _  ( %>: ) Â¤: ( %>: ) ( Â»: ( Â»: Â»: )) [ X1: | X4: | X5: | X7: | X8: | ( ğŸ˜± ) # | Hyph | s | n | %^DISIMP: ] ;
! a:i <=> Cns _  ( %>: ) Â¤: ( %>: ) ( Â»: ( Â»: Â»: )) [ X1: | X4: | X5: | X7: | X8: | ( ğŸ˜± ) # | Hyph ] ;
! The problem with the old one was that it didn't trigger for Essive and for
! the Px forms of the nominative.
! The new one isn't perfect, the s and n are rather quasi for Ess and Px.

"Stem Vowel in Dual and Pl 1st Person Imperative"             ! jearra:jearru
  Vx:u <=> Cns _ ( %>: ) ( Â»: ( Â»: Â»: )) Y2: ;                                 ! boah'ti:boahttu
			where Vx in (a i) ;
!!â‚¬ jearraY2
!!â‚¬ jearru0

!!â‚¬ boah'tiY2
!!â‚¬ boahttu0


"Stem Vowel in Plural 2nd Person Imperative"
!  Vx:Vy <=> Cns _ ( %>: ) ( Â»: ( Â»: Â»: )) Q2: ;                               ! boah'ti:bohtet
   Vx:Vy <=> Cns _ ( %>: ) ( Â»: ( Â»: Â»: )) Y3: ;                               ! Äuor'vu:Äurvot
			where Vx in (a i u)
			      Vy in (e e o)
			matched ;
! Q2 context replaced by other rule for both imperative and other categories
!!â‚¬ jearraQ2t
!!â‚¬ je0rre0t

!! boah'tiY4t ! It seems it should be Q3. ... both?!
!!â‚¬ boah'tiQ3t
!!â‚¬ bo0h0to0t


!! Äuor'vuY4t ! Q2, it seems.
!!â‚¬ Äuor'vuQ2t
!!â‚¬ Äu0r0vo0t

"Stem Vowel in Imperative Plural 1st Person and Passive Stem"
  Vx:o <=> Cns _ ( %>: ) ( Â»: ( Â»: Â»: )) [ Y4: | Y7: ] ( %>: ) ( Â»: ( Â»: Â»: )) (Y5:) [Cns: - j:i| ( ğŸ˜± ) #] ;
		   where Vx in (a i u) ;


! Y7 Testing passive forms
!!â‚¬ jearraY7t#
!!â‚¬ je0rro0t#

!!â‚¬ boah'tiY7t#
!!â‚¬ bo0htto0t#

!!â‚¬ Äuor'vuY7t#
!!â‚¬ Äu0r0vo0t#

!!â‚¬ jearraY7juvvot#
!!â‚¬ je0rro0juvvot#

! Conflict: a:{o,u} <=> Cns _ Y7: {j: / unspecified}

!"Stem Vowel in Past Tense of Derived Passive Stem"
!  Vx:u <=> Cns _  Y7: (Y6:) j: ;
!			where Vx in (a i) ;

! This battlefield will be cleaned up, eventually, but we leave it as-is
! for a while, so that Thomas and others can have a look at the ruins.

! New oldrule
 "Stem Vowel in Past Tense of Derived Passive Stem"
   Vx:u <=> Cns _ ( %>: ) ( Â»: ( Â»: Â»: )) Y7: (Y6:) j:i [ ( ğŸ˜± ) #|m|d|g] ;
             where Vx in (a i)  ;
! for jerrui.


!!â‚¬ jearraY7j#
!!â‚¬ je0rru0i#

!!â‚¬ dah'kaY7j#
!!â‚¬ dahkku0i#

!!â‚¬ loikaY7j#
!!â‚¬ loiku0i#


! Old rule
! "Stem Vowel in Past Tense of Derived Passive Stem"
!   Vx:u <=> Cns _  Y7: Y6: j: ;
!            where Vx in (a i)  ;

! Put Y6 into paranthesis, otherwise o:u stem vowel shift doesn't work in Passive+Ind+Prt+Sg3 of
! Impersonals and intransitives. (TO)
! But we don't have passives of impersonals and intransitives, do we ?! So, what was
! the reason for changing the rule? (TT) yes we have passives of impersonals and intransitives:-) (TO):
!arvit+V+IV+Pass+Ind+Prt+Sg3
!arvojuvvui
!arvui


! Stem vowel deletion in compounding
! ---------------------------------------------

"Ã¡-stem vowel deletion"
 Ã¡:0 <=> Cns: _ W3: ( ğŸ˜± ) # ;

"a-stem vowel deletion"
 a:0 <=> Cns: _ W3: ( ğŸ˜± ) #  ;
           e: _ b: b: o: ( %>: ) ( Â»: ( Â»: Â»: )) [X2:|X3:|X6:]; !Diphthong Simplification in -eabbo comparatives


"i-stem vowel deletion"
 i:0 <=> Cns: _ W3: ( ğŸ˜± ) #  ;

"u-stem vowel deletion"
 u:0 <=> Cns: _ W3: ( ğŸ˜± ) #  ;

"e-stem vowel deletion"
 e:0 <=> Cns: _ W3: ( ğŸ˜± ) #  ;

"o-stem vowel deletion"
 o:0 <=> Cns: _ W3: ( ğŸ˜± ) #  ;



! Special word final consonants
! -----------------------------

"Word Final Deletion of n8 m8 g8 h8"                   ! beatnag8:beana
  Cx:0 <=> Vow _ ( %>: ) ( Â»: ( Â»: Â»: )) [ X4: | X8: | X6: Cns: | X9: | W4: ] ;      ! luopmÃ¡n8:luomi
			where Cx in (DelCns) matched ; ! giellum8:gielu
!!â‚¬ beatnag8X4
!!â‚¬ bea0na00

!!â‚¬ luopmin8X4
!!â‚¬ luo0mi00

!!â‚¬ giellum8X4
!!â‚¬ gie0lu00



"Word Final Neutralization of g8, h8, m8"
  Cx:Cy <=> Vow _ ( %>: ) ( Â»: ( Â»: Â»: )) [ X2: | X7: ] [ Hyph | ( ğŸ˜± ) # ] ;
			where Cx in (g8 h8 m8)
			      Cy in (t  t  n )
			matched ;

! Please add a test or two:
! â‚¬
! â‚¬




! Appendix: Deleted rules that still need attention
! -------------------------------------------------





!"Postvocalic j Surfacing"
!  j:i <=> Vow: ( :0 ) ( %>: ) ( Â»: ( Â»: Â»: )) ( Dummy: ) _ [ Cns | ': | ( :0 - Y5: - Y6:)+  [ Hyph | ( ğŸ˜± ) # ] ] ; !more and more dummies...
! j:i <=> Vow: ( :0 ) ( Dummy: ) _ [ Cns | ': | ( :0 - Y5: )+  [ Hyph | ( ğŸ˜± ) # ] ] ; !more dummies...
! j:i <=> Vow: ( :0 ) ( Dummy: ) _ [ Cns | ': | ( :0 - Y5: )   [ Hyph | ( ğŸ˜± ) # ] ] ; !1.138
! j:i <=> Vow: ( :0 ) ( Dummy: ) _ [(Dummy:* - Y5: -Y6:    ) [ [ Hyph | ( ğŸ˜± ) # ] | Cns: ([ Hyph | ( ğŸ˜± ) # ]) ]]; ! bad bec. Ess almmÃ¡jin *almmÃ¡iin almmÃ¡jX4in
! j:i <=                     _ [Cns | ( DummyNotY5: ) ( ğŸ˜± ) # ] ;                             ! <============ 1.1 version:
!!!j:i <=> Vow: (:0) (Dummy:) _ [Cns | ': | (:0 - Y5:) [ Hyph # | #]] ;
!! Changed because:we get almmÃ¡j- and not almmÃ¡i-
!! Postvocalic j surfaces as i
!! Is this what we want?? without right context??? postvoc j:i <=> Vow: ( :0 ) (Dummy: ) _ ;


! "Word Final Consonant Neutralization 1"  !smirezit : smires, Troandin-bisma
!   Cx:Cy <=> Vow: (( CntrCns:) Dummy:+) _ ( %>: ) ( Â»: ( Â»: Â»: )) ( :0 - Y5: - Y6: )( :0 - Y5: - Y6: ) [ Hyph | ( ğŸ˜± ) # ]  ;
! ! Cx:Cy <=> Vow: (( CntrCns:) Dummy:+) _    ( :0 - Y5: )( :0 - Y5: ) [ Hyph | ( ğŸ˜± ) # ]  ; !1.138
! ! Cx:Cy <=> Vow: (( CntrCns:) Dummy:+) _    ( Dummy: )  ( :0 - Y5: ) [ Hyph | ( ğŸ˜± ) # ]  ;
! ! Cx:Cy <=> Vow: (( CntrCns:) Dummy:+) _    ( Dummy:  - Y5: - Y6:  ) [ :0 - Y5: - Y6:] [ Hyph | ( ğŸ˜± ) # ]  ; ! 1.155
! ! Cx:Cy <=> Vow: (( CntrCns:) Dummy:+) _  [ ( Dummy:* - Y5   )       [ Hyph | ( ğŸ˜± ) # ]] ;
! ! Cx:Cy <=> Vow: (( CntrCns:) Dummy:+) _  [ ( Dummy:* - Y5:  )       [ Hyph | ( ğŸ˜± ) # ]] ;
! ! Cx:Cy <=> Vow: (( CntrCns:) Dummy:+) _  [ ( Dummy:* - Y5: - Y6:  ) [ Hyph | ( ğŸ˜± ) # ]] ; ! not vejolaÅ¡
! 			where Cx in (z Å¾ m h p g b d)
! 			      Cy in (s Å¡ n t t t t t)
! 			matched ;



!"Word Final Consonant Neutralization 2"
! This is no longer a mystery. For once, we ask for the # symbol in the
! left context. Why we do, is a mystery, but at least now the example works.
! We should thus consider whether the leftmost # is needed in the rule.

! â‚¬ hÃ¡lijd>#
! â‚¬ hÃ¡liit>#

! â‚¬ hÃ¡lijd>#
! â‚¬ hÃ¡liid>#

!"Stem Final Consonant Neutralization" !hÃ¡liidit : hÃ¡liit
! Cx:Cy <=> Vow: Cns* (Vow*) Vow: ( CntrCns:)  _  # ;
!			where Cx in (z Å¾ m h p d g b)
!			      Cy in (s Å¡ n t t t t t)
!			matched ;
!
! Old version:
! Cx:Cy <=> Vow: (( CntrCns:) Dummy:+) _ ( :0 - Y5: ) [ Hyph | ( ğŸ˜± ) # ]  ;
! This one works for all except hÃ¡liit.
!
! Tentative version:
! Cx:Cy <=> Vow: ( CntrCns:) (Dummy:+) _ ( :0 - Y5: ) [ Hyph | ( ğŸ˜± ) # ]  ;
! The nested left context was changed because of hÃ¡liidit - hÃ¡liit.
! NOTE: there are 454 jd# that come out incorrectly with this version.

! Overview over j translations.
! j:j # | Cns _                     ! this is default
! j:i     Vow _ Cns                 ! Most common exception
! j:0     Vow _ [ Y5: | Y6: j: ]    ! Contracted stems
! j:j     Vow _ Vow                 ! if followed by vow-initial suff


! *) footnote 1
! Older, removed versions:
! Vx:Vy <=> [ Vow Vow | Ã¡ ] Cns:+ Cns: _ StemCns:* : ;
! This one gave vuovden# as only possible form of vuovdin in compounds.
! Vx:Vy <=> [ Vow Vow | Ã¡ ] Cns:+ Cns _ StemCns:* [ X7: | X8: ] ;
! the problem with this one was that it was not restricted to compounds !!
! The X7: | X8: line was commented out since no lexicon in sme-lex.txt
! pointed from X8 to R. This move should be checked for compounds later.

!"Vowel Shortening in Compounds after Long 1st Syllable 2"
!  Vx:Vy <=> [ Hyph | #  | Cns ] Vz Cns+ Cns: Cns+ _ StemCns:* [ X7: | X8: ] ;
!			where Vz in (a i o u) ;
!			where Vx in (u i)
!			      Vy in (o e)
!			matched ;
! XXX Remainder! This rule is commented out since including it
! spoils the i:Ã¡ alternation of verbs (boahtit:boaÄ‘Ã¡n, for some reason.
! This should be looked into.
