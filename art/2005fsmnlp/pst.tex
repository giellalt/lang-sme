\documentclass[a4paper,english]{article}
\usepackage{babel}
\usepackage{ucs}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{psfrag}
\usepackage{a4wide}

\begin{document}

\title{Twol at work}

\author{Sjur Moshagen\\ The Sámi Parliament\\ Norway
\and Pekka Sammallahti\\ Giellagas Institute\\ University of Oulu
\and Trond Trosterud\\ Faculty of the humanities\\ University of Tromsø}


\maketitle

\tableofcontents

\section{Introduction}

In this article, we will show two-level morphology at work. In sections \ref{twol} and \ref{disamb}, we will lay out the foundation for the work, by presenting the philosophy behind the Northern Sámi two-level parser. In sections \ref{ped}, \ref{spell} and \ref{term} we then have a look at different applications, pedagogical programs, spell checking and terminology management.

\section{Two-level morphology}\label{twol}

Languages with ample morphophonological variation pose a problem for automatic analysis. A recapitulation of historical changes (or phonological rules) in two-level rules may be an elegant solution from the point of view of an overall grasp of the language in question but one soon runs into difficulties in dealing with products of analogical levellings and other exceptions, especially when text words consist of several morphemes each interacting with the other phonologically. One such language is Saami where word stems interacting with affixes can have over 20 phonological variants and derivational and inflectional morphemes interacting with word stems or each other more than five. 

After unsuccesfully trying different morphophonological rule approaches to the variation stemming from morpheme interaction an \textbf{indexed concatenation model} was devised. This model provides \textbf{phonological/graphemic morpheme variants} with indexes (or abstract features) according to their continuation categories, the sets of suffixes it prededes. In practice a phonological/graphemic variant of a word stem occurring before a certain set of suffixes receives an index different from that of another variant occurring before a different set of suffixes. 

Since the distribution of stem variants in relation to suffix sets vary from one stem type to another, a single phonological/graphemic variant of a word stem may belong to two or more morphophonological variants if a different stem has two or more phonological/graphemic variants before the same set of suffixes. Accordingly the suffixes are indexed according to their relations with morphophonological word stem variants. 

The interaction with the word stems\textit{giehta} ‘hand; arm’ and\textit{njunni} ‘nose’ with the nominative plural suffix \textit{­t} and the second person singular accusative possessive suffix \textit{­t} may serve as an example. Both suffixes call for \textbf{weak grade} in the stem consonant center (the consonants between a stressed and a stressless vowel): (\textit{njunni $\rightarrow$}) \textit{njuni-t} ‘noses’ and (\textit{giehta} $\rightarrow$)\textit{ gieđa-t} ‘hands/arms’. However, the two suffixes call for different stem vowel alternants in i-stems but not in a-stems: \textit{njuni-t} ‘noses’ ≠ \textit{njuná-t} ‘your nose’ but \textit{gieđa-t} ‘hands/arms’ = \textit{gieđa-t} ‘your hand/arm’. The stems \textit{njuni-} and \textit{njuná-} receive different indexes or abstract features (such as \textit{njuni-N1} and \textit{njuná-N2}) because they call for different sets of suffixes but so do the corresponding instances of the stem \textit{gieđa-} (\textit{gieđa-N1} and \textit{gieđa-N2}) because the suffixes it precedes belong to two sets. 

Since nouns have partly the same mophophonological variants as verbs, the morphophonological variants receive three kinds of indexes: N for the morphophonological variants of nouns, V for the morphophonological variants of verbs, and X for the morphophonological variants shared by nouns and verbs.

\section{Disambiguation}\label{disamb}

Disambiguation may be done in several ways. One is Finite-state intersection grammar, as suggested by \cite{Koskenniemi97}. In our Sámi project, we have chosen a different path, and use constraint grammar, as presented by \cite{Tapanainen96}, here in Eckhard Bick's open-source version \textit{vislcg}. This component is being written by Trond Trosterud and Marit Julien. Although still under development, it is already good enough to match the level of statistically-based POS taggers. At its present stage, it contains approximately 1300 disambiguation rules.


\section{Twol in use}

A grammatical analysator can be used for many purposes. We will here have a look at some areas where the Sámi analysator has been put to use.

\subsection{Pedagogical programs}\label{ped}

The Sámi analysator has been used to analyse sentences for interactive pedagogical syntax learning in the so-called visl project (Visual Syntax Learning) at Syddansk Universitet. The format in itself is not dependent upon having a grammatical analysator, but the analysator makes it possible to add sentences automatically. The process behind the analysis in Figure \ref{underlying} consists of three parts:

\begin{enumerate}
\item The morphological analyser gives all possible analyses
\item A morphological disambiguator removes the incorrect ones, and add syntactic functions
\item A phrase structure grammar gives the linear representation a hierarchical structure
\end{enumerate}

At present, beta versions of the first two components are in place. The third component is still missing.
For a sentence like \textit{Áhčči lea oastán munnje divrras sabehiid} 'Father has bought me a an expensive pair of skis', the morphological analyser gives the representation in Figure \ref{fatherall}.

\begin{figure}[htdp]
\caption{Morphological analysis}
\begin{center}
\begin{verbatim}
"<Áhčči>"
         "áhčči" N Sg Nom
"<lea>"
         "leat" V Ind Prs Sg3
"<oastán>"
         "oastit" V PrfPrc
         "oastit" V* N Actor Sg Nom PxSg1
         "oastit" V* N Actor Sg Gen PxSg1
         "oastit" V* N Actor Sg Acc PxSg1
         "oasti" N Sg Nom PxSg1
         "oasti" N Sg Gen PxSg1
         "oasti" N Sg Acc PxSg1
"<munnje>"
         "mun" Pron Pers Sg1 Ill
"<divrras>"
         "divrras" A Attr
         "divrras" A Sg Nom
"<sabehiid>"
         "sabet" N Pl Gen
         "sabet" N Pl Acc
"<.>"
         "." CLB
\end{verbatim}
\end{center}
\label{fatherall}
\end{figure}%

After disambiguation and adding of syntactic functions, the same sentence can be seen in Figure \ref{fatherdis}.

\begin{figure}[htdp]
\caption{Disambiguated version}
\begin{center}
\begin{verbatim}
"<Áhčči>"
        "áhčči" N Sg Nom @SUBJ
"<lea>"
        "leat" V Ind Prs Sg3 @+FAUXV
"<oastán>"
        "oastit" V PrfPrc @-FMAINV
"<munnje>"
        "mun" Pron Pers Sg1 Ill @ADVL
"<divrras>"
         "divrras" A Attr @AN>
"<sabehiid>"
        "sabet" N Pl Acc @OBJ
"<.>"
\end{verbatim}
\end{center}
\label{fatherdis}
\end{figure}%

The underlying representation of the pedagogical program takes the disambiguated analysis as input, and makes a tree structure, as seen in Figure \ref{underlying}. At present, this process is only partly automatised, the bracketing of constituents (denoted with '=') must be done manually, making such a component is the next task ahead.

\begin{figure}[htdp]
\caption{Underlying representation in the pedagogical program}
\begin{center}
\begin{verbatim}
S:n('áhčči',sg,nom)	Áhčči
P:g
=D:v('leat',ind,pr,3sg)	lea
=H:v('oastit',pcp2)	oastán
A:pron('mun',<pers>,1sg,ill)	munnje
Od:g
=D:adj('divrras',attr)  divrras
=H:n('sabet',pl,acc)	sabehiid
\end{verbatim}
\end{center}
\label{underlying}
\end{figure}%

A pilot set of 200 Sámi sentences will shortly be included in the \textit{http://visl.sdu.dk/visl/}. As soon as they become part of that pedagogical platform, the sentences will be reused in a large range of pedagogical programs, ranging from interactive syntax analysis via word-class shooting games to text analysis.

%\begin{figure}  %%% If we had a figure, it would have been included like this :-(
%\caption{Graphical version of a similar sentence in Finnish}
%\begin{center}
%\includegraphics{snt.png}
%\end{center}
%\label{fin}
%\end{figure}

Later, when the analysator becomes better, it will also be possible to offer an open system, where the computer analyses user input and offers an interface for the user to analyse for himself. 

\subsection{TWOL as generator 1: paradigm generation for a terminological database}\label{term}

The bidirectional nature of the two-level model makes it ideal not only for analysis but also for generation of word forms. An example of this is seen in Figure \ref{anagen}, using the current North Sámi transducer.

\begin{figure}[htb]
\caption{Analysis and generation of the same word form using the same two-level model in oposite directions}
\begin{center}
\begin{verbatim}
xfst[1]: apply up
apply up> máná
mánná+N+Sg+Acc
mánná+N+Sg+Gen

xfst[1]: apply down
apply down> mánná+N+Sg+Acc
máná
\end{verbatim}
\end{center}
\label{anagen}
\end{figure}

This feature of the two-level model will be put into use in a terminological database developed by the Sámi parliament (at \textit{http://www.risten.no/}) to generate complete paradigms at runtime of any entry in the database. The paradigm generation will first be implemented for North Sámi, and later for Julev (Lule) Sámi and other Sámi languages.

Unless special attention is paid to homonym entry words with different inflection, the simple application of a two-level model in the oposite direction will overgenerate, leading to wrongly generated word forms. One way of dealing with the overgeneration would be to introduce another tag to homonyms as part of their lexical entry, as shown in Figure \ref{homonlex}. This would ensure round-trip consistency without over-generation (one will always be able to generate exactly what was analyzed), but would complicate generation of such homonyms if no analysis is available: without knowing that it is a homonym, how would one know that the word requires a special tag to be generated?

\begin{figure}[htb]
\caption{Homonym lexical entries with an additional tag to differentiate them in analysis and generation}
\begin{center}
\begin{verbatim}

Reine duplikat:
vuosmmis:vuos'mis MALIS ; !(pl.)
servvodat:servvodah'k JOHTOLAT ;

Duplikat i fyrste ledd (før kolon eller bøying):
ču0ru
olmmoš#goddi
optihkka
ludni
vuohppi
namma#vahkku
oarre#vahkku
álgo#vahkku
biidno#vahkku
oahppo#vahkku
mihcamár#vahkku
loahppáš#vahkku
fádnu
fidnu
návva
ollut
olut
vuosmmis
servvodat

Ingen av desse er døme på homonyme grunnformer med ulik bøying -
det ser ikkje ut som om det finst i (nord)samisk.(?)
\end{verbatim}
\end{center}
\label{homonlex}
\end{figure}

\subsection{Spell checker}\label{spell}

Using two-level technologies for making spellers was early on a pretty obvious application of it (cf xx, yy), and one way of implementing it is more recently described \cite{Beesley03}. Commercial implementations have been available since 1987 from Lingsoft Oy\footnote{See http://www.lingsoft.fi/} for Finnish and Swedish, later also several other languages. For languages with free compounding, using two-level technologies can also improve hyphenation tools, cf. \cite{Karlsson85}. A commercial implementation is available from Lingsoft Oy, and described at \textit{http://www.lingsoft.fi/doc/d-finhyp9.html}.

Since October 2004 the Norwegian Saami Parliament has been running a project to create proofing tools for North and Julev (Lule) Saami. The project is based on the work by Pekka Sammallahti and the projects at the University of Tromsø.

\subsubsection{Handling descriptive and normative models at the same time}

%ikkje-permissiv automat - korleis får vi det til?

The proofing tools project is using the same lexicons as other Sámi language technology projects at the University of Tromsø. While the university projects by nature are descriptive and wants to be able to analyse both standard orthography and common substandard variants, the proofing tools' goal is to help authors make written text conform to orthographic standards. The language of the proofing tools is thus a subset of the language of the other projects, and to create a two-level model for proofing tools, we need to extract this subset language.

A very simple, but often sufficient, way of doing this, is to add a comment to unofficial variants, and remove these variants using text processing methods in a preprocessing stage before compiling the lexicon, e.g. using 'grep'. This is how it is implemented in the present version of the North Sámi TWOL, cf Figure \ref{sublex}, where the comment \textit{!Sub} marks off substandard variants.

\begin{figure}[htbp]
\begin{center}
\begin{verbatim}
leans#mán0ni:leans#mán'ni VIVVA ;
lens#mán0ni:lens#mán'ni VIVVA ; !SUB
kapihtal GAHPIR ; !SUB
sektor GAHPIR ; !SUB
\end{verbatim}
\caption{Example North Sámi entries with comments for substandard forms}
\label{sublex}
\end{center}
\end{figure}

%Skal vi slutta her? Dvs. stryka det som står under? Nei.

Another, more advanced and flexible method would be to use the network operations available in current language technology tools such as the Xerox Finite State tools described in \cite{Beesley03}. Using network subtraction it would be possible to remove from the model language the language containing all and only the language with a specified feature, e.g. +Sub. This would also imply that substandard variants that are morphophonological rather than lexical in their nature could easily be removed. One regular phenomenon in North Sámi is final vowel reduction before word boundaries in compounds.


GenPl as -iid in the standard but as \textit{-ii}
 in some of the dialects...
 % vi prøver å få det til...

\begin{figure}[htbp]
\caption{whatever}
\begin{center}
\begin{verbatim}
 LEXICON EABBO/EAMOS_CONT
 +Comp+W:eabbo EABBU ;  ! Parallel form Standard. West
 +Comp+E:ab'bo EABBU ;  ! Parallel form Standard. East
 +Comp+W+Sub:eabbu EABBU ;  ! Parallel form Not standard. West !SUB
 +Comp+E+Sub:ab'bu EABBU ;  ! Parallel form Not standard. East !SUB
\end{verbatim}
\label{EWadjcomp}
\end{center}
\end{figure}

\subsection{Non-permisive automaton and speller}

Twol som generator - generer fullformslister for språkteknologisk svake stavekontrollar

The project will create spellers and hyphenators for several applications on Windows, MacOS X and Linux. Spellers for applications like MS Office based on two-level technology have been described elsewhere several times (cf. Arppe xxx \& yyy), and will not be discussed here. Instead we will discuss briefly how two-level technology can be applied to a linguistically more limited speller engine like aSpell (\textit{http://aspell.net/}).

aSpell is a derivative of iSpell, and employs a simple one-level automata model for its engine. It supports in its latest version what is called "affix compression" using "affix lexicons"[xxx???], which is a limited implementation of continuation lexicons\footnote{iSpell has had this feature from early on, but aSpell has only recently implemented it, since version 0.60.}.

xfst includes a command to generate a fullform list from non-recursive transducers. We have also marked the circular entries in the lexicon, making it easy to create a subset of it that is non-recursive. This model still contains a lot of word formation through derivation, but nothing based on compounding.

In addition  to the above, we will lexicalise all entries found in written material, such that

\section{Summing up}

liuhgiluewrhn.

 
\bibliography{lgtech}

\bibliographystyle{alpha}


\end{document}
